<!-- need edit -->
<section>
    <div class="container edit-need">
        <div>
            <h2 class="text-left">{{'editNeed.editingOfNeed' | translate}}</h2>
        </div>
        <div class="form-group row">
            <div class="col-sm-10">
                <form editable-form name="editNeedForm" onaftersave="vm.saveEditedNeed()">
                    <div class="form-group row">
                        <label class="control-label col-sm-2">{{'editNeed.needName' | translate}}:</label>

                        <div class="col-sm-10">
                            <div>
                                <span editable-text="vm.editedNeed.title" e-name="name" onbeforesave="updateNeed($data)"
                                      e-required>{{ vm.editedNeed.title }}</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-sm-2">{{'editNeed.category' | translate}}:</label>
                        <div class="col-sm-10 col-md-6 col-lg-4">
                            <category-search class="col-xs-12 no-gutter margin-bottom-20"
                                             name="categories"
                                             category="vm.category"
                                             category-hierarchy="vm.categoryHierarchy"
                                             ng-model="vm.categoryHierarchy"
                                             required>
                            </category-search>
                            <span ng-if="editNeedForm.categories.$invalid" class="error">
                                {{'editNeed.requiredField' | translate}}</span>
                        </div>
                    </div>
                    <hr>
                    <div class="form-group row">
                        <label class="control-label col-sm-2">{{'editNeed.needDescription' | translate}}:</label>
                        <div class="col-sm-10">
                            <div>
                                <a href="#" editable-textarea="vm.editedNeed.needText" e-rows="7" e-cols="90">
                                    <pre>{{ vm.editedNeed.needText }}</pre>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-sm-2">{{'editNeed.photo' | translate}}:</label>
                        <file-upload-directive images="vm.images"></file-upload-directive>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-sm-2">{{'editNeed.selectRegion' | translate}}:</label>
                        <div class="col-sm-3">
                            <select name="region" class="form-control"
                                    ng-options="region.name for region in vm.regions track by region.id"
                                    ng-model="vm.editedNeed.region"
                                    ng-change="vm.setRegion(vm.editedNeed.region,editNeedForm)"
                                    required>
                            </select>
                            <span ng-if="editNeedForm.region.$invalid" class="error">
                                {{'editNeed.requiredField' | translate}}</span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-sm-2">{{'editNeed.selectCity' | translate}}:</label>
                        <div class="col-sm-2">
                            <!-- here should be pre-filled data depending on previous select field -->
                            <select name="city" class="form-control"
                                    ng-options="city.name for city in vm.cities track by city.name"
                                    ng-model="vm.editedNeed.city"
                                    required>
                            </select>
                            <span
                                ng-if="editNeedForm.region.$valid && editNeedForm.city.$invalid"
                                class="error">{{'editNeed.requiredField' | translate}}</span>
                        </div>
                    </div>
                    <hr>
                    <div class="form-group row">
                        <label class="control-label col-sm-2">{{'editNeed.address' | translate}}:</label>
                        <div class="col-sm-3">
                            <span editable-text="vm.editedNeed.address" e-name="street" onbeforesave="updateNeed($data)"
                                  id="str">{{ vm.editedNeed.address }}</span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <date-picker date="vm.dt">{{vm.editedNeed.date}}</date-picker>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-sm-2">{{'editNeed.convenientTime' | translate}}:</label>
                        <day-and-time convenient-time="vm.convenientDate"
                                      ng-model="vm.convenientDate">
                        </day-and-time>
                    </div>
                    <status status="vm.editedNeed.status" statuses="vm.editedNeedStatuses"></status>
                    <!-- button to show form -->
                    <div class="form-group row pull-right">
                        <div class="col-sm-12">
                            <button type="button" class="btn btn-default" ng-click="editNeedForm.$show()"
                                    ng-show="!editNeedForm.$visible" ng-init="editNeedForm.$show()">
                                {{'editNeed.edit' | translate}}
                            </button>
                            <!-- buttons to submit / cancel form -->
                            <span ng-show="editNeedForm.$visible">
                              <button type="submit" class="btn btn-primary" ng-disabled="editNeedForm.$invalid">
                                  {{'editNeed.save' | translate}}
                              </button>
                              <a ng-click="vm.cancel()" class="btn btn-default" id="myButton0">{{'editNeed.cancel' |
                                  translate}}</a>
                                <!-- <button type="button" class="btn btn-default" ng-disabled="editNeedForm.$waiting" ng-click="editNeedForm.$cancel()">
                                    Скасувати
                                </button> -->
                            </span>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>
<!-- edit, the end of section -->

